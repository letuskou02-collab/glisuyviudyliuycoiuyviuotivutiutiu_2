<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#1a6b2f" />
  <meta name="description" content="日本の一般国道ステッカーの取得状況を記録するPWAアプリ" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="国道ステッカー" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="icon" href="./icons/icon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="stylesheet" href="./style.css" />
  <title>国道ステッカーコレクション</title>
</head>
<body>

  <!-- ヘッダー -->
  <header class="app-header">
    <div class="header-top">
      <div class="app-title">
        <span class="logo">🛣</span>
        国道ステッカーコレクション
      </div>
      <div class="header-stats">
        <strong id="stat-collected">0</strong>
        / <span id="stat-total">0</span>
        &nbsp;<span id="stat-pct">0</span>%
      </div>
    </div>
    <div class="progress-bar-wrap">
      <div class="progress-bar" id="progress-bar" style="width:0%"></div>
    </div>
  </header>

  <!-- ツールバー -->
  <div class="toolbar">
    <div class="search-wrap">
      <span class="icon">🔍</span>
      <input type="search" id="search-input" placeholder="号数・地方・区間で検索…" autocomplete="off" />
    </div>
    <div class="filter-tabs">
      <button class="tab-btn active" data-filter="all">すべて</button>
      <button class="tab-btn" data-filter="collected">取得済み</button>
      <button class="tab-btn" data-filter="not-collected">未取得</button>
    </div>
    <div class="toolbar-selects">
      <select id="region-select">
        <option value="">地方：すべて</option>
        <option value="北海道">北海道</option>
        <option value="東北">東北</option>
        <option value="関東">関東</option>
        <option value="中部">中部</option>
        <option value="北陸">北陸</option>
        <option value="近畿">近畿</option>
        <option value="中国">中国</option>
        <option value="四国">四国</option>
        <option value="九州">九州</option>
        <option value="沖縄">沖縄</option>
      </select>
      <select id="type-select">
        <option value="">種別：すべて</option>
        <option value="一桁">一桁国道</option>
        <option value="二桁">二桁国道</option>
        <option value="三桁">三桁国道</option>
      </select>
    </div>
  </div>

  <!-- 地方別サマリー -->
  <section class="region-summary">
    <h2>地方別進捗</h2>
    <div class="region-cards" id="region-cards"></div>
  </section>

  <!-- 国道一覧 -->
  <section class="routes-section">
    <div class="section-header">
      <h2>国道一覧 <span id="section-count"></span></h2>
      <div class="view-toggle">
        <button class="view-btn active" id="btn-grid-view" title="グリッド表示">⊞</button>
        <button class="view-btn" id="btn-list-view" title="リスト表示">≡</button>
      </div>
    </div>
    <div id="routes-container" class="routes-grid"></div>
  </section>

  <!-- モーダル（詳細・編集） -->
  <div id="modal-overlay" role="dialog" aria-modal="true">
    <div class="modal-sheet">
      <div class="modal-drag"></div>
      <div class="modal-header">
        <div class="modal-title">
          <h3 id="modal-route-num">国道1号</h3>
          <div class="route-region" id="modal-route-region"></div>
        </div>
        <button class="modal-close" id="modal-close" aria-label="閉じる">✕</button>
      </div>
      <div class="modal-route-detail">
        起点：<span id="modal-route-from"></span>　終点：<span id="modal-route-to"></span>
      </div>
      <button class="collect-toggle" id="collect-toggle-btn">○ 取得済みにする</button>

      <!-- 取得場所 -->
      <div class="modal-field">
        <label for="modal-location-input">📍 取得場所</label>
        <div class="location-input-wrap">
          <input type="text" id="modal-location-input" placeholder="例：道の駅〇〇、△△サービスエリア" />
          <button class="btn-geocode" id="btn-geocode" title="施設名から緯度経度を検索">🔍</button>
          <button class="btn-gps" id="btn-gps" title="現在地を取得">🎯</button>
        </div>
      </div>

      <!-- 緯度経度 -->
      <div class="modal-field">
        <label>🌐 緯度・経度</label>
        <div class="latlng-wrap">
          <input type="number" id="modal-lat-input" placeholder="緯度 (例: 35.6812)" step="0.000001" />
          <span class="latlng-sep">,</span>
          <input type="number" id="modal-lng-input" placeholder="経度 (例: 139.7671)" step="0.000001" />
        </div>
        <div class="latlng-actions">
          <a id="modal-map-link" class="map-link" href="#" target="_blank" rel="noopener" style="display:none">🗺 地図で確認</a>
        </div>
      </div>

      <!-- 写真 -->
      <div class="modal-field">
        <label>📷 写真</label>
        <div class="photo-area" id="photo-area">
          <div class="photo-grid" id="photo-grid"></div>
          <label class="btn-add-photo" for="photo-input">
            <span>＋ 写真を追加</span>
            <input type="file" id="photo-input" accept="image/*" multiple capture="environment" style="display:none" />
          </label>
        </div>
      </div>

      <!-- メモ -->
      <div class="modal-field">
        <label for="modal-memo-input">📝 メモ</label>
        <textarea id="modal-memo-input" placeholder="自由にメモを入力…"></textarea>
      </div>
      <div class="modal-date" id="modal-date"></div>
    </div>
  </div>

  <!-- FAB（設定メニュー） -->
  <div class="fab-area">
    <button class="fab-main" id="fab-main" aria-label="メニュー">⚙</button>
    <div class="fab-sub" id="fab-sub">
      <div class="fab-item">
        <span class="fab-label">データをリセット</span>
        <button id="fab-reset" aria-label="リセット">🗑</button>
      </div>
      <div class="fab-item">
        <span class="fab-label">インポート</span>
        <button id="fab-import" aria-label="インポート">📥</button>
      </div>
      <div class="fab-item">
        <span class="fab-label">エクスポート</span>
        <button id="fab-export" aria-label="エクスポート">📤</button>
      </div>
    </div>
  </div>

  <!-- トースト通知 -->
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script src="./data/routes.js"></script>
  <script src="./app.js"></script>
</body>
</html>
