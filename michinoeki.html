<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#2e7d32" />
  <meta name="description" content="全国の道の駅訪問記録PWAアプリ" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="道の駅" />
  <link rel="manifest" href="./manifest-michinoeki.json" />
  <link rel="icon" href="./icons/icon-michinoeki.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />
  <link rel="stylesheet" href="./lib/leaflet.css" />
  <link rel="stylesheet" href="./style.css" />
  <link rel="stylesheet" href="./michinoeki.css" />
  <title>道の駅訪問記録</title>
</head>
<body>

  <!-- ステータスバー固定カバー -->
  <div class="status-bar-cover michi-cover"></div>

  <!-- ページコンテナ -->
  <main class="app-body" id="app-body">

    <!-- ===== ホーム ===== -->
    <div id="michi-view-home" class="view-page michi-home-page">
      <div class="michi-home-header">
        <div class="michi-home-icon">🏪</div>
        <h1 class="michi-home-title">道の駅訪問記録</h1>
      </div>
      <div class="michi-stats-grid">
        <div class="michi-stat-card">
          <div class="michi-stat-num" id="michi-stat-total">0</div>
          <div class="michi-stat-label">訪問済み</div>
        </div>
        <div class="michi-stat-card">
          <div class="michi-stat-num" id="michi-stat-stamp">0</div>
          <div class="michi-stat-label">スタンプ取得</div>
        </div>
        <div class="michi-stat-card">
          <div class="michi-stat-num" id="michi-stat-photos">0</div>
          <div class="michi-stat-label">写真枚数</div>
        </div>
      </div>
      <div class="michi-recent-section">
        <div class="michi-section-title">最近の訪問</div>
        <div id="michi-recent-list" class="michi-recent-list"></div>
      </div>
    </div>

    <!-- ===== 記録一覧 ===== -->
    <div id="michi-view-list" class="view-page" style="display:none">
      <div class="page-header michi-header">
        <h2>🏪 道の駅一覧</h2>
        <div class="michi-search-wrap">
          <input type="search" id="michi-search" class="michi-search-input" placeholder="道の駅名・住所で検索" />
        </div>
      </div>
      <div class="michi-filter-bar">
        <button class="michi-filter-btn active" data-filter="all">すべて</button>
        <button class="michi-filter-btn" data-filter="visited">訪問済み</button>
        <button class="michi-filter-btn" data-filter="unvisited">未訪問</button>
      </div>
      <div id="michi-list" class="michi-list"></div>
      <button class="michi-add-fab" id="michi-add-fab">＋ 道の駅を追加</button>
    </div>

    <!-- ===== 地図 ===== -->
    <div id="michi-view-map" class="view-page" style="display:none">
      <div class="page-header michi-header">
        <h2>🗺️ 訪問マップ</h2>
      </div>
      <div id="michi-map" class="michi-map"></div>
    </div>

    <!-- ===== その他 ===== -->
    <div id="michi-view-other" class="view-page other-page" style="display:none">
      <div class="page-header michi-header">
        <h2>⚙ その他</h2>
      </div>
      <div class="other-section">
        <div class="other-group-label">データ管理</div>
        <div class="other-group">
          <div class="other-row" id="michi-btn-export">
            <span class="other-row-icon">📤</span>
            <div class="other-row-body">
              <div class="other-row-title">エクスポート</div>
              <div class="other-row-desc">JSONファイルとして保存</div>
            </div>
            <span class="arrow">›</span>
          </div>
          <div class="other-row" id="michi-btn-import">
            <span class="other-row-icon">📥</span>
            <div class="other-row-body">
              <div class="other-row-title">インポート</div>
              <div class="other-row-desc">JSONファイルから復元・マージ</div>
            </div>
            <span class="arrow">›</span>
          </div>
        </div>

        <div class="other-group-label">アプリ切り替え</div>
        <div class="other-group">
          <div class="other-row" id="michi-btn-switch-kokudo">
            <span class="other-row-icon">🛣️</span>
            <div class="other-row-body">
              <div class="other-row-title">国道ステッカーへ切り替え</div>
              <div class="other-row-desc">国道ステッカー収集アプリを開く</div>
            </div>
            <span class="arrow">›</span>
          </div>
        </div>

        <div class="other-group-label">データの削除</div>
        <div class="other-group">
          <div class="other-row danger" id="michi-btn-reset">
            <span class="other-row-icon">🗑️</span>
            <div class="other-row-body">
              <div class="other-row-title">すべてリセット</div>
              <div class="other-row-desc">全記録を削除（元に戻せません）</div>
            </div>
            <span class="arrow">›</span>
          </div>
        </div>

        <div class="other-group-label">アプリについて</div>
        <div class="other-info">
          道の駅訪問記録<br>
          全国の道の駅訪問を記録するアプリ
        </div>
      </div>
    </div>

  </main>

  <!-- ボトムタブバー（緑テーマ） -->
  <nav class="bottom-tab-bar michi-tab-bar">
    <button class="tab-item active" data-view="home">
      <span class="tab-icon">🏠</span>
      <span class="tab-label">ホーム</span>
    </button>
    <button class="tab-item" data-view="list">
      <span class="tab-icon">📋</span>
      <span class="tab-label">一覧</span>
    </button>
    <button class="tab-item" data-view="map">
      <span class="tab-icon">🗺️</span>
      <span class="tab-label">地図</span>
    </button>
    <button class="tab-item" data-view="other">
      <span class="tab-icon">⚙</span>
      <span class="tab-label">その他</span>
    </button>
  </nav>

  <!-- ===== 道の駅登録・編集モーダル ===== -->
  <div id="michi-modal-overlay" class="modal-overlay" role="dialog" aria-modal="true" style="display:none">
    <div class="modal-sheet michi-modal-sheet">
      <div class="modal-handle"></div>
      <h3 class="modal-title" id="michi-modal-title">道の駅を登録</h3>
      <div class="michi-form">
        <input type="hidden" id="michi-edit-id" />
        <div class="michi-form-group">
          <label class="michi-form-label">道の駅名 <span class="required">*</span></label>
          <input type="text" id="michi-name" class="michi-form-input" placeholder="例：道の駅 富士川楽座" />
        </div>
        <div class="michi-form-group">
          <label class="michi-form-label">都道府県</label>
          <select id="michi-pref" class="michi-form-input michi-form-select">
            <option value="">選択してください</option>
            <option>北海道</option><option>青森県</option><option>岩手県</option>
            <option>宮城県</option><option>秋田県</option><option>山形県</option>
            <option>福島県</option><option>茨城県</option><option>栃木県</option>
            <option>群馬県</option><option>埼玉県</option><option>千葉県</option>
            <option>東京都</option><option>神奈川県</option><option>新潟県</option>
            <option>富山県</option><option>石川県</option><option>福井県</option>
            <option>山梨県</option><option>長野県</option><option>岐阜県</option>
            <option>静岡県</option><option>愛知県</option><option>三重県</option>
            <option>滋賀県</option><option>京都府</option><option>大阪府</option>
            <option>兵庫県</option><option>奈良県</option><option>和歌山県</option>
            <option>鳥取県</option><option>島根県</option><option>岡山県</option>
            <option>広島県</option><option>山口県</option><option>徳島県</option>
            <option>香川県</option><option>愛媛県</option><option>高知県</option>
            <option>福岡県</option><option>佐賀県</option><option>長崎県</option>
            <option>熊本県</option><option>大分県</option><option>宮崎県</option>
            <option>鹿児島県</option><option>沖縄県</option>
          </select>
        </div>
        <div class="michi-form-group">
          <label class="michi-form-label">訪問日</label>
          <input type="date" id="michi-date" class="michi-form-input" />
        </div>
        <div class="michi-form-group michi-check-row">
          <label class="michi-check-label">
            <input type="checkbox" id="michi-visited" class="michi-check-input" />
            <span class="michi-check-text">訪問済み</span>
          </label>
          <label class="michi-check-label">
            <input type="checkbox" id="michi-stamp" class="michi-check-input" />
            <span class="michi-check-text">スタンプ取得</span>
          </label>
        </div>
        <div class="michi-form-group">
          <label class="michi-form-label">メモ</label>
          <textarea id="michi-memo" class="michi-form-input michi-form-textarea" placeholder="感想・メモなど" rows="3"></textarea>
        </div>
        <div class="michi-form-group">
          <label class="michi-form-label">写真</label>
          <div class="michi-photo-area">
            <div id="michi-photo-preview" class="michi-photo-preview"></div>
            <label class="michi-photo-add-btn">
              📷 写真を追加
              <input type="file" id="michi-photo-input" accept="image/*" multiple style="display:none" />
            </label>
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="modal-btn-cancel" id="michi-modal-cancel">キャンセル</button>
        <button class="modal-btn-save michi-btn-save" id="michi-modal-save">保存</button>
      </div>
    </div>
  </div>

  <!-- インポートファイル入力 -->
  <input type="file" id="michi-import-file" accept=".json" style="display:none" />

  <script src="./lib/leaflet.js"></script>
  <script src="./michinoeki.js"></script>
</body>
</html>
